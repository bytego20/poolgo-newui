(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["swap"],{"0d32":function(t,e,a){t.exports=a.p+"img/usdc.3b5972c1.svg"},"14de":function(t,e,a){t.exports=a.p+"img/pcfx.2780873c.svg"},"2e6e":function(t,e,a){t.exports=a.p+"img/arrow-down.e9da1460.svg"},"45e4":function(t,e,a){t.exports=a.p+"img/usdt.eac1f7bb.svg"},"61d0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"swaps",staticStyle:{height:"100vh"}},[n("div",{staticClass:"container"},[t._m(0),n("div",{staticClass:"swap-items"},[n("div",{staticClass:"box-wrap"},[n("div",{staticClass:"coin-box",staticStyle:{"margin-bottom":"10px"}},[n("div",{staticClass:"top"},[n("div",[n("div",{staticClass:"coin-select"},["1"==t.value1?n("img",{attrs:{src:a("0d32")}}):t._e(),"2"==t.value1?n("img",{attrs:{src:a("45e4")}}):t._e(),"3"==t.value1?n("img",{attrs:{src:a("d657")}}):t._e(),"4"==t.value1?n("img",{attrs:{width:"40px",height:"40px",src:a("14de")}}):t._e(),n("vs-select",{attrs:{placeholder:"",color:"#e91e62",state:"success",background:"#e91e62"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},[n("vs-option",{attrs:{label:"CFX",value:"3"}},[t._v(" CFX ")]),n("vs-option",{attrs:{label:"PCFX",value:"4"}},[t._v(" PCFX ")])],1)],1)]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.topBalance,expression:"topBalance"}],staticClass:"token-amount-input",attrs:{inputmode:"decimal",autocomplete:"off",autocorrect:"off",type:"text",placeholder:"0.0",pattern:"^[0-9]*[.,]?[0-9]*$"},domProps:{value:t.topBalance},on:{input:[function(e){e.target.composing||(t.topBalance=e.target.value)},t.topInput],keypress:function(e){return t.isNumber(e)}}})]),n("div",{staticClass:"bottom"},[n("span",{on:{click:t.topAvailableClick}},[t._v("Available: "+t._s(t.toFixed(t.topAvailable,4)))])])]),n("div",{staticClass:"center-box",on:{click:function(e){return t.handleSwitch()}}},[n("img",{staticStyle:{color:"#fff"},attrs:{width:"18px",height:"18px",src:a("2e6e")}})]),n("div",{staticClass:"coin-box",staticStyle:{"margin-top":"10px"}},[n("div",{staticClass:"top"},[n("div",[n("div",{staticClass:"coin-select"},["1"==t.value2?n("img",{attrs:{src:a("0d32")}}):t._e(),"2"==t.value2?n("img",{attrs:{src:a("45e4")}}):t._e(),"3"==t.value2?n("img",{attrs:{src:a("d657")}}):t._e(),"4"==t.value2?n("img",{attrs:{width:"40px",height:"40px",src:a("14de")}}):t._e(),n("vs-select",{attrs:{placeholder:"USDT",color:"#e91e62",state:"success",background:"#e91e62"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[n("vs-option",{attrs:{label:"CFX",value:"3"}},[t._v(" CFX ")]),n("vs-option",{attrs:{label:"PCFX",value:"4"}},[t._v(" PCFX ")])],1)],1)]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.bottomBalance,expression:"bottomBalance"}],staticClass:"token-amount-input",attrs:{inputmode:"decimal",autocomplete:"off",autocorrect:"off",type:"text",placeholder:"0.0",spellcheck:"false",pattern:"^[0-9]*[.,]?[0-9]*$"},domProps:{value:t.bottomBalance},on:{keypress:function(e){return t.isNumber(e)},input:function(e){e.target.composing||(t.bottomBalance=e.target.value)}}})]),n("div",{staticClass:"bottom"},[n("span",{on:{click:t.bottomAvailableClick}},[t._v("Available: "+t._s(t.toFixed(t.bottomAvailable,4)))])])])]),n("div",{staticClass:"exchange-info"},[n("div",{staticClass:"receive"},[n("div",{staticClass:"left"},[t._v("Receive(min)")]),n("div",{staticClass:"right"},[t._v(t._s(t.toFixed(t.minReceive,2)))])]),t._m(1),n("div",{staticClass:"price"},[n("div",{staticClass:"left"},[t._v("Price")]),n("div",{staticClass:"right"},[t._v("1"+t._s(t.coinName(t.value1))+" = 1"+t._s(1==t.value2?"USDC":t.coinName(t.value2)))])])]),n("vs-button",{staticClass:"swapButton",attrs:{gradient:"",loading:t.loading},on:{click:t.swap}},[t._v(" "+t._s(t.account?t.$t("swap"):t.$t("unlock"))+" ")])],1)])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toolbar"},[a("div",{staticClass:"toolbar-title"},[a("span",[t._v("Swap")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slippage"},[a("div",{staticClass:"left"},[t._v("Slippage tolerance")]),a("div",{staticClass:"right"},[t._v("0%")])])}],s=(a("b680"),a("5530")),o=(a("96cf"),a("1da1")),c=a("2f62"),r=a("901e"),l={name:"swap-view",components:{},data:function(){return{active:0,loading:!1,value1:"3",value2:"4",minReceive:0,topBalance:null,topAvailable:345.2324343,bottomBalance:null,bottomAvailable:324.444334333}},computed:{pcfxContract:function(){return this.$store.state.web3.pcfxContract},account:function(){return this.$store.state.web3.account},balance:function(){return this.$store.state.web3.balance},pcfxBalance:function(){return this.$store.state.web3.pcfxBalance}},watch:{balance:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.loadBalance();case 1:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),pcfxBalance:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.loadBalance();case 1:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),value1:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e),console.log(a),this.value2=a;case 3:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),value2:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.value1=a;case 1:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loadBalance();case 1:case"end":return e.stop()}}),e)})))()},methods:Object(s["a"])(Object(s["a"])({},Object(c["b"])(["cfxLogin"])),{},{swap:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.account){e.next=5;break}return e.next=3,t.cfxLogin();case 3:e.next=34;break;case 5:if("3"!=t.value1){e.next=24;break}if(a=t,0!=a.$store.state.web3.isPortalInstalled){e.next=10;break}return a.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:a.$t("error"),text:a.$t("noticeWallet")}),e.abrupt("return");case 10:if(null!=a.$store.state.web3.account){e.next=13;break}return a.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:a.$t("error"),text:a.$t("noticeAddr")}),e.abrupt("return");case 13:if(!(null==a.topBalance||a.topBalance<=0)){e.next=16;break}return t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:a.$t("error"),text:a.$t("correctNumPlaceholder")}),e.abrupt("return");case 16:return t.loading=!0,e.next=19,a.pcfxContract.deposit(a.$store.state.web3.account,a.topBalance);case 19:n=e.sent,console.log(n),1==n.succ?t.$vs.notification({duration:6e3,icon:"<i class='bx bx-select-multiple' ></i>",progress:"auto",color:"success",position:"top-center",title:a.$t("info"),text:a.$t("noticeCfxTranslate")}):t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:a.$t("error"),text:n.message}),e.next=31;break;case 24:if("4"!=t.value1){e.next=31;break}return t.loading=!0,i=t,e.next=29,i.pcfxContract.withdraw(i.$store.state.web3.account,i.topBalance);case 29:s=e.sent,1==s.succ?t.$vs.notification({duration:6e3,icon:"<i class='bx bx-select-multiple' ></i>",progress:"auto",color:"success",position:"top-center",title:i.$t("info"),text:i.$t("noticePcfxTranslate")}):t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:i.$t("error"),text:s.message});case 31:t.loading=!1,t.updateCfxAndPcfxBalance(),t.loadBalance();case 34:case"end":return e.stop()}}),e)})))()},updateCfxAndPcfxBalance:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,a.pcfxContract.balanceOf(a.$store.state.web3.account);case 3:return n=e.sent,a.$store.commit("UPDATE_PCFX_BALANCE",n),e.next=7,t.$store.state.web3.confluxReader.getBalance(a.$store.state.web3.account);case 7:i=e.sent,a.$store.commit("UPDATE_BALANCE",Object(r["BigNumber"])(i).div(Object(r["BigNumber"])(Math.pow(10,18))));case 9:case"end":return e.stop()}}),e)})))()},loadBalance:function(){"3"==this.value1?this.topAvailable=this.$store.state.web3.balance:"3"==this.value1&&(this.topAvailable=this.$store.state.web3.pcfxBalance),"3"==this.value2?this.bottomAvailable=this.$store.state.web3.balance:"4"==this.value2&&(this.bottomAvailable=this.$store.state.web3.pcfxBalance)},topInput:function(){this.minReceive=this.topBalance},handleSwitch:function(){var t=this.value1;this.value1=this.value2,this.value2=t,this.updateUi()},topAvailableClick:function(){this.topBalance=this.topAvailable,this.topInput()},bottomAvailableClick:function(){this.bottomBalance=this.bottomAvailable},updateUi:function(){"3"==this.value1?this.topAvailable=this.balance:"4"==this.value1&&(this.topAvailable=this.pcfxBalance),"3"==this.value2?this.bottomAvailable=this.balance:"4"==this.value2&&(this.bottomAvailable=this.pcfxBalance),this.minReceive=this.topBalance},coinName:function(t){return"1"==t?"USDC":"2"==t?"USDT":"3"==t?"CFX":"4"==t?"PCFX":void 0},toFixed:function(t,e){var a=Math.pow(10,e),n=Math.round(t*a)/a;return n.toFixed(e)},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e))return!0;t.preventDefault()}})},u=l,p=(a("d5cd"),a("2877")),v=Object(p["a"])(u,n,i,!1,null,null,null);e["default"]=v.exports},"72b9":function(t,e,a){},d5cd:function(t,e,a){"use strict";a("72b9")},d657:function(t,e,a){t.exports=a.p+"img/cfx.7c388c4f.svg"}}]);
//# sourceMappingURL=swap.f7607f0a.js.map